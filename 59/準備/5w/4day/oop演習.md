今日やることは
オブジェクト指向の todoアプリ作成です

zipファイルを二つ送ったので、
それを解凍しましょう

php/oopフォルダをhtdocsの中に作って
その中に解凍したフォルダを入れましょう

phpmyadminでtodo2というDBを作成しましょう
 utf8_general_ciを洗濯しましょう

 できたら~.sqlをコードをコピーして、phpmyadminでテーブルを作成しよう

 ブラウザで確認しましょう
 todo
 todo_template


 では実際に作っていきましょう

 taskの
 一覧
 新規作成
 編集
 削除
 検索
 これを作るけど、もし終わったという人は
 下を作ってもらう


 +アルファ
 認証機能
 サインアップ
 サインアップ
 サインアウト

Read.meファイルに
説明が書いてあるので確認してみよう

今と先週の違うところは
DBの詳細がModels/の中に分けている点です

dbconnect.phpとmodelsが今回、oopでかいてあるところです
なので、他のところは先週と同じです。

ではいきなり一人で作るのもわからないと思うので、
まずは一緒に一覧画面を作りましょう

一覧表示の機能実装で作ることは
二つ
データの取得と
データを表示することです。

難しく考えないでください
先週やったことと同じです。
ただ少しやり方が変わったよということです。


まずはDB接続のコードを書きましょう
require_onceは他のファイルを読み込む関数です
require_once('./dbconnect.php');

Models.phpは共通部分
Taskテーブルに何かする場合はtask.php
userテーブルに何かする場合はuser.php

なので今回はtaskの一覧を表示したいから
require_once('./dbconnect.php');
require_once('./task.php');

Task.phpの中をみてみよう
Taskをクラスで定義していて
プロパティが宣言されている
でcreateというメソッドが定義されていますよね

extendsは何か覚えてますか？
継承ですよね

Model.phpをみてみましょう。
諸々書いてありますね

今回はtaskモデルを使って
taskテーブルからデータをとってきたい

（index.phpへ移る）
メソッドを使用する場合は
最初にインスタンス化する必要がある

$task = new Task();   インスタンス化はnew Class名でインスタンス化できます

では本当にインスタンス化できているのか確認する場合は
var_dump($task);die;
ブラウザを確認すると
objectと書いてあって、ちゃんと入っていることが確認できます

Model.phpをみてみてください
今回はデータをとってきたいんです、
Get allを使いたいです。

ではindex.phpに戻りましょう
ではどうやってGetAllメソッドを使うのでしょうか
今回は
$tasks = $task->getAll();
ではvar_dump($tasks)をやって中身が取れているか確認してみましょう

echo '<pre>';
整形するコード

ではindex.phpのしたの方をみて
foreach文を書きましょう

ここにタイトルとか
ここに文章というのを
実際にデータベースに保存したものを取り出したい

<?= $tasks['title']; ?>
をここにタイトル部分に入力

ではエスケープをしましょう
require_onceでfunction.phpを読み込むよ！
<?= h($tasks['title']); ?>
としましょう

これはセキュリティ対策です

ここまでできたらOKです

ではindex.phpを改めてみてみましょう
先週と違っている点は
$task = new Task();
$tasks = $task->getAll();
この二行です。

getAll()は何なのかというと
Model.phpをみてみましょう
ここにデータベースの処理が記載されている

index.phpには今回はデータベースに接続する必要なし
今回はmodelがやってくれる
いわゆる分業制になったということ

これで一覧機能作成が終了しました。

新規作成と削除は比較的簡単なので、
二人組のところは一人が新規作成、一人が削除をやってもらう

三人組は新規作成、削除、検索をやろう

今回の実装を通しての目標は
チーム開発の練習
オブジェクト指向の練習
コードを読む練習


代表者がやる手順
1.ローカルリポジトリを作る(todo_templateをローカルリポジトリにする)
2.リモートリポジトリを作成
3.１と2を連携
4.add commit push
5.コラボレータ登録(pushできるようにする)
  setting->manage access

その他メンバーがやる作業
- git clone
- invitation

開発作業
branchをきる
開発作業
add commit
push
pull request
merge
pull 

新規作成
削除機能をやってもらう

検索機能
編集

